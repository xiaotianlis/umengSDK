<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_26) on Fri May 25 15:07:24 CST 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<TITLE>
com.umeng.fb (UMENG SDK)
</TITLE>

<META NAME="date" CONTENT="2012-05-25">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.umeng.fb (UMENG SDK)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

			 <a href="http://www.umeng.com"><img src="http://www.umeng.com/images/image_updated/logo.png"></a></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/umeng/analytics/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../com/umeng/xp/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/umeng/fb/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<H2>
Package com.umeng.fb
</H2>
友盟反馈
<P>
<B>See:</B>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="#package_description"><B>Description</B></A>
<P>

<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/umeng/fb/UmengConstants.html" title="class in com.umeng.fb">UmengConstants</A></B></TD>
<TD>&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><A HREF="../../../com/umeng/fb/UMFeedbackService.html" title="class in com.umeng.fb">UMFeedbackService</A></B></TD>
<TD>开发人员使用反馈功能的入口</TD>
</TR>
</TABLE>
&nbsp;

<P>
<A NAME="package_description"><!-- --></A><H2>
Package com.umeng.fb Description
</H2>

<P>
<p>友盟反馈</p>
        <h3>更新日志</h3>
        <table border="1">
                <tr>
                        <th>日期</th>
                        <th>版本</th>
                        <th>说明</th>
                </tr>
                <tr>
                        <td>2012/02/22</td>
                        <td>V﻿1.0</td>
                        <td>反馈sdk从统计sdk中独立出来</td>
                </tr>
                <tr>
                        <td>2011/02/01</td>
                        <td>V1.0.1</td>
                        <td>解决不能与统计sdk同时集成的问题</td>
                </tr>
        </table>
        <h3>1 用户反馈默认样式</h3>
        除了可以通过统计报表，自定义事件等方式了解到用户的使用情况之外，友盟可以帮助开发者收集到最直观的用户反馈。集成用户反馈模块，您只需要:
        
        <h4>1.1 将zip包里的资源文件(layout、values、values-en、drawable)复制到res对应的文件夹下,您可以更改资源但是请不要更改文件名和资源ID。 并在<application>标签中添加新的activity :</h4>
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                <activity android:name="com.feedback.ui.SendFeedback" android:windowSoftInputMode="adjustResize"></activity> 
                <activity android:name="com.feedback.ui.FeedbackConversations"></activity> 
                <activity android:name="com.feedback.ui.FeedbackConversation" android:configChanges="keyboard"></activity>
        ]]></script>

        <h4>1.2 代码中启用Feedback模块，调用下面函数进入反馈界面：</h4>
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                UMFeedbackService.openUmengFeedbackSDK(this);
        ]]></script>

        <h4>1.3 当开发者回复用户反馈后，如果需要提醒用户，请在应用程序的入口Activity的OnCreate()方法中下添加以下代码</h4>
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                UMFeedbackService.enableNewReplyNotification(this, NotificationType.AlertDialog);
        ]]></script>

                方法第一个参数类型为：Context，第二个参数为枚举类型，可选值为NotificationType.AlertDialog 或NotificationType.NotificationBar，分别对应两种不同的提示方式： AlertDialog 以 AlertDialog方式提醒用户，
                NotificationBar 则使用NotificationBar 方式提醒用户。<p>
                若调用该接口，反馈模块将在你程序启动后于后台检查是否有新的来自开发者的回复，若有，我们将提醒用户，若无，则不会打扰用户。<p>
                你也可以选择不调用该接口，这样我们会在用户进入反馈界面后，再去检查是否存在新的回复。<p>

        <h4>代码示例：</h4>
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                public void onCreate(Bundle savedInstanceState) {
                        super.onCreate(savedInstanceState);             
                        UMFeedbackService.enableNewReplyNotification(this, 0);
                }
                         
                public boolean onCreateOptionsMenu(Menu menu) {
                    //一般可以在OptionsMenu中添加一个Item,用于作为反馈界面的入口
                        menu.add(0, 0, 0, "feedback");
                        ...
                        return true;
                }
                         
                public boolean onOptionsItemSelected(MenuItem item) {
                        switch (item.getItemId()) {
                                case 0:
                                // 调用反馈提供的接口，进入反馈界面
                                UMFeedbackService.openUmengFeedbackSDK(this);
                                    return true;
                                       default:
                                      ...
                         }
                 }
        ]]></script>


        <h3>2 用户反馈定制化</h3>
        <h4>2.1 信息定制</h4>
                “友盟反馈”还支持反馈信息的定制化，以便在反馈页面中收集额外信息。例如，开发者想进行有奖反馈，他可能需要收集用户的QQ、手机号等联系方式用于确认，另外还可能需要用户姓名、奖品寄送地址等信息。那么他需要按如下步骤操作：
        <h5>2.1.1 在反馈页面umeng_analyse_send_feedback.xml中，增加收集额外信息的控件；</h5>
        <h5>2.1.2 处理反馈发送逻辑的Activity需要实现FeedBackListener接口，并覆盖接口定义的两个方法：onSubmitFB, onResetFB。</h5>
        <h5>2.1.3 在onSubmitFB方法中，您需要将反馈页面中获得的额外信息，添加到联系方式信息集contactMap、备注信息集remarkMap，友盟会自动发送信息到服务器并展示在反馈报表中。</h5>
        <h5>2.1.4 onResetFB方法支持把用户上次填写的信息再次加载出来，开发者可以把这些信息自动填入页面控件中，避免用户重复输入。</h5>
        代码实现大致如下：
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                public class XXXActivity extends Activity implements FeedBackListener {
                        &#64Override
                        public void onSubmitFB(Activity activity) {

                                phoneText = (EditText) UMFeedbackService.findViewById(activity, "id", "umeng_analyse_feedback_phone");
                                qqText = (EditText) UMFeedbackService.findViewById(activity, "id", "umeng_analyse_feedback_qq");
                                nameText = (EditText) UMFeedbackService.findViewById(activity, "id", "umeng_analyse_feedback_name");
                                addressText = (EditText) UMFeedbackService.findViewById(activity, "id", "umeng_analyse_feedback_address");
                                 
                                Map<String, String> contactMap = new HashMap<String, String>();
                                contactMap .put("phone", phoneText.getText().toString());
                                contactMap .put("qq", qqText.getText().toString());
                                UMFeedbackService.setContactMap (contactMap ); 
                                 
                                Map<String, String> remarkMap = new HashMap<String, String>();
                                remarkMap.put("name", nameText.getText().toString());
                                remarkMap.put("address", addressText.getText().toString());
                                UMFeedbackService.setRemarkMap(remarkMap);      
                        }
                        &#64Override
                        public void onResetFB(Activity activity, Map<String, String> contactMap , Map<String, String> remarkMap) {
                                nameText = (EditText) UMFeedbackService.findViewById(activity, "id", "umeng_analyse_feedback_name");
                                if (remarkMap != null && remarkMap.get("name") != null){
                                        String name = remarkMap.get("name").toString();
                                        nameText.setText(name);
                                }
                                ...
                        }
                }
        ]]></script>

        <h4>2.2 功能定制</h4>
                如果您程序界面是iOS风格，我们还提供了左上角的“返回”按钮，用于退出友盟反馈模块。启动友盟反馈模块前，您需要增加如下语句来设置“返回”按钮可见：
        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                UMFeedbackService.setGoBackButtonVisible();
        ]]></script>
        如果您需要定制其外观，只需在umeng_analyse_send_feedback.xml中找到id为umeng_analyse_feedback_goback_btn的控件并进行编辑即可。<p>
        备注：如果集成反馈sdk的应用需要混淆，应该在应用的混淆文件中增加如下代码：<p>

        <script type="syntaxhighlighter" class="brush: java">
        <![CDATA[
                -keep public [YourPackagePath].R$*{

                        public static final int umeng_feedback_*;

                        public static final int umeng_fb_*;

                }
        ]]></script>



        <!-- Include required JS files -->
        <script
                src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js'
                type='text/javascript'></script>
        <link href="../../../styles/shThemeEclipse.css" rel="stylesheet"
                type="text/css" />
        <link href="../../../styles/shCore.css" rel="stylesheet"
                type="text/css" />

        <!--            <script type="text/javascript" src="../../../scripts/shCore.js"></script>
        <script type="text/javascript" src="../../../scripts/shBrushXml.js"></script>
        <script type="text/javascript" src="../../../scripts/shBrushJava.js"></script>
        <script src='../../../scripts/shAutoloader.js' type='text/javascript'></script> -->

        <script src="../../../scripts/shCore.js" type="text/javascript"></script>
        <script src="../../../scripts/shAutoloader.js" type="text/javascript"></script>


        <script type='text/javascript'>
                $(function() {
                        function path() {
                                var args = arguments, result = [];

                                for ( var i = 0; i < args.length; i++)
                                        result.push(args[i].replace('@', '../../../scripts/'));

                                return result
                        }
                        ;

                        SyntaxHighlighter.autoloader.apply(null, path(
                                        'applescript            @shBrushAppleScript.js',
                                        'actionscript3 as3      @shBrushAS3.js',
                                        'bash shell             @shBrushBash.js',
                                        'coldfusion cf          @shBrushColdFusion.js',
                                        'cpp c                  @shBrushCpp.js',
                                        'c# c-sharp csharp      @shBrushCSharp.js',
                                        'css                    @shBrushCss.js',
                                        'delphi pascal          @shBrushDelphi.js',
                                        'diff patch pas         @shBrushDiff.js',
                                        'erl erlang             @shBrushErlang.js',
                                        'groovy                 @shBrushGroovy.js',
                                        'java                   @shBrushJava.js',
                                        'jfx javafx             @shBrushJavaFX.js',
                                        'js jscript javascript  @shBrushJScript.js',
                                        'perl pl                @shBrushPerl.js',
                                        'php                    @shBrushPhp.js',
                                        'text plain             @shBrushPlain.js',
                                        'py python              @shBrushPython.js',
                                        'ruby rails ror rb      @shBrushRuby.js',
                                        'sass scss              @shBrushSass.js',
                                        'scala                  @shBrushScala.js',
                                        'sql                    @shBrushSql.js',
                                        'vb vbnet               @shBrushVb.js',
                                        'xml xhtml xslt html    @shBrushXml.js'));
                        SyntaxHighlighter.all();
                });
        </script>
<P>

<P>
<DL>
</DL>
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Package</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <FONT CLASS="NavBarFont1">Class</FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-use.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>

			 <a href="http://www.umeng.com"><img src="http://www.umeng.com/images/image_updated/logo.png"></a></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/umeng/analytics/package-summary.html"><B>PREV PACKAGE</B></A>&nbsp;
&nbsp;<A HREF="../../../com/umeng/xp/package-summary.html"><B>NEXT PACKAGE</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?com/umeng/fb/package-summary.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="package-summary.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

			<i>Copyright &#169; 2012 Umeng Corp. All Rights Reserved.</i>
</BODY>
</HTML>
